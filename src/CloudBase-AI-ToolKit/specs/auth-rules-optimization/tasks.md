# 实施计划

## 任务概览

本次优化主要针对 CloudBase AI Toolkit 的规则文件进行更新，确保 AI 开发工具在处理登录认证需求时能够正确使用 CloudBase SDK 的内置功能。

## 具体任务

- [x] 1. 更新 Web 开发规则文件
  - 强化 CloudBase Web SDK 内置认证功能的使用说明
  - 添加完整的登录认证示例代码
  - 明确禁止使用云函数实现登录认证逻辑
  - 添加登录状态管理和错误处理的最佳实践
  - _需求: 需求 1, 需求 3, 需求 4

- [x] 2. 更新小程序开发规则文件
  - 明确说明小程序云开发的免登录特性
  - 添加 openid 获取和用户管理的示例代码
  - 强调在云函数中基于 openid 进行用户数据管理
  - 禁止生成不必要的登录页面或登录流程代码
  - _需求: 需求 2, 需求 3, 需求 4

- [x] 3. 更新云开发平台规则文件
  - 添加认证相关的最佳实践指导
  - 明确区分 Web 端和小程序端的认证方式
  - 添加用户数据管理的安全建议
  - 提供数据库权限配置的指导
  - _需求: 需求 3, 需求 4

- [x] 4. 验证规则文件更新
  - 检查规则文件的语法和格式正确性
  - 验证示例代码的完整性和可用性
  - 确保不同规则文件之间的协调性
  - 测试规则文件的可读性和理解性
  - _需求: 需求 1, 需求 2, 需求 3, 需求 4

- [x] 5. 更新核心规则索引文件
  - 更新 `config/cloudbase-rules.mdc` 中的认证相关说明
  - 确保规则文件之间的引用关系正确
  - 添加认证方式选择的指导原则
  - _需求: 需求 3, 需求 4

- [x] 6. 执行硬链接同步
  - 运行 `fix-config-hardlinks.sh` 脚本
  - 确保所有 IDE 配置文件同步更新
  - 验证硬链接状态正确
  - _需求: 需求 3, 需求 4

## 任务优先级

1. **高优先级**: 任务 1, 任务 2 - 直接影响 AI 开发工具的行为
2. **中优先级**: 任务 3, 任务 5 - 提供补充指导和整体协调
3. **低优先级**: 任务 4 - 验证和测试，确保质量

## 预期成果

1. **Web 开发规则**: 明确强调使用 SDK 内置认证功能，提供完整示例
2. **小程序开发规则**: 明确免登录特性，提供 openid 管理示例
3. **云开发平台规则**: 添加认证最佳实践和安全指导
4. **整体协调**: 确保不同平台认证方式的正确区分和使用

## 成功标准

1. AI 开发工具在处理登录认证需求时，能够正确选择认证方式
2. Web 项目优先使用 SDK 内置认证功能，不错误使用云函数
3. 小程序项目明确免登录特性，正确使用 openid 进行用户管理
4. 规则文件之间协调一致，避免混淆和冲突 